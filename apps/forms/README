# gl-pipeline (monorepo) — Tapable-based WebGL pipeline demo

This repository is a template showing a Tapable-based GL pipeline with:

- plugin-driven lifecycle (engineInit/resourceLoad/resourceParse/buildScene/renderLoop/postProcess/dispose)
- adapter layer (Three/Galacean)
- plugins: GLTF loader, Validator, CustomShader, VideoTexture, Business plugin
- DevTools (React + Tailwind) showing timeline, context and plugins
- monorepo structure (pnpm workspaces)
- unit test example (Vitest)

## Quick start

1. Install pnpm (if not already):

```bash
npm i -g pnpm

2. Install dependencies root (pnpm will install workspace packages):

pnpm install

3. Start examples app:

pnpm run dev:examples

4.Start DevTools (separately, optional):

pnpm run dev:devtools


Open http://localhost:5174

The examples app exposes dev artifacts to window (basic integration):

window.__GLPIPE_CTX__ → current RenderingContext

window.__GLPIPE_PLUGINS__ → registered plugin meta

window.__GLPIPE_LOGGER__ → PipelineLogger (DevTools can attach by reading)

## Notes

To enable Galacean adapter, install @galacean/engine in workspace:

pnpm -w add @galacean/engine


DevTools is a lightweight React app to inspect pipeline execution timeline and context.

This template is ready to be refactored into multiple npm packages; build scripts (tsc) exist in each package.

## Testing

Run tests:

pnpm run test

Next steps (suggested)

Implement more robust glTF parsing in plugins (use three GLTFLoader integration)

Add types & stricter plugin manifest validation

Add CLI to scaffold plugins and run pipeline presets

Add CI (GitHub Actions) for testing & build

```
